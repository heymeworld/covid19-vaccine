FROM python:3.9-alpine3.17
EXPOSE 8000
COPY . .
RUN apk update
RUN apk add gcc musl-dev mariadb-connector-c-dev 
RUN pip3 install -r requirements.txt --no-cache-dir
RUN apk del gcc musl-dev
RUN pip install pymysql
WORKDIR ./mysite/
CMD ["python3", "manage.py", "makemigrations"]
CMD ["python3", "manage.py", "migrate"]
CMD ["python3", "manage.py", "runserver", "0:8000", "--noreload"]

